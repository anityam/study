<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Envoy</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Envoy"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://anityam.github.io/study//notes/1x0zf84gbbfnd1owvoeciml/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="8/5/2023"/><meta property="article:modified_time" content="8/6/2023"/><link rel="canonical" href="https://anityam.github.io/study//notes/1x0zf84gbbfnd1owvoeciml/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b338472289fe290.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/zp_HKZaSycHHJrSC5b1vy/_buildManifest.js" defer=""></script><script src="/_next/static/zp_HKZaSycHHJrSC5b1vy/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="envoy">Envoy<a aria-hidden="true" class="anchor-heading icon-link" href="#envoy"></a></h1>
<h1 id="envoy-1">Envoy<a aria-hidden="true" class="anchor-heading icon-link" href="#envoy-1"></a></h1>
<p>Envoy is the backbone of the Istio service mesh. It is an open source project that lives in <a href="https://envoyproxy.io">https://envoyproxy.io</a> .</p>
<p>It is a transparent proxy. The main concept of which was established to create a transparent network proxy which is easy to debug. A proxy is a middleman that sits between the client and the server and through which the traffic flows for the communication between server and client.
Client ---> Proxy ---> Server
Technically a proxy can stand between the client and server and simplify the setting. The communication logic can be placed in the proxy without the server and client having to delete with the communication logic and able to focus on their specific client or server based logics.</p>
<h2 id="concept">Concept<a aria-hidden="true" class="anchor-heading icon-link" href="#concept"></a></h2>
<p> Envoy is designed as an application level proxy and can understand the layer 7 protocols. It can be extended to understand other level proxies. Lot of more telemetries come out of box due to Envoy understanding application level protocols</p>
<h2 id="feature">Feature<a aria-hidden="true" class="anchor-heading icon-link" href="#feature"></a></h2>
<p>Listeners --> ports where downstream(something sending information from to the server or to the )
Routes --> The route setup for the downstream routes to be moved to the upstream clusters
Clusters --> the server portion or the </p>
<h3 id="service-discovery">Service Discovery<a aria-hidden="true" class="anchor-heading icon-link" href="#service-discovery"></a></h3>
<p>It uses service discovery api to look for the service. </p>
<h3 id="load-balancing">Load Balancing<a aria-hidden="true" class="anchor-heading icon-link" href="#load-balancing"></a></h3>
<p>It uses local-aware load balancing. Can be configured to use other routing strategies.</p>
<h3 id="traffic-and-request-routing">Traffic and Request Routing<a aria-hidden="true" class="anchor-heading icon-link" href="#traffic-and-request-routing"></a></h3>
<p>Sophisticated routing rules since it can understand L7 protocols like HTTP/1 or HTTp/2</p>
<h3 id="traffic-shifting-and-shadowing">Traffic Shifting and Shadowing<a aria-hidden="true" class="anchor-heading icon-link" href="#traffic-shifting-and-shadowing"></a></h3>
<p>Envoy can split traffic based on weight and also move copy of traffic to certain version( only a copy of the traffic the real flow still can use the other version)</p>
<h3 id="network-resilience">Network Resilience<a aria-hidden="true" class="anchor-heading icon-link" href="#network-resilience"></a></h3>
<p>Retries, timeouts, Health checks can be configured in Envoy.</p>
<h3 id="metrics">Metrics<a aria-hidden="true" class="anchor-heading icon-link" href="#metrics"></a></h3>
<p>It can generate a lot of metrics</p>
<h3 id="tracing">Tracing<a aria-hidden="true" class="anchor-heading icon-link" href="#tracing"></a></h3>
<p>It will generate x-request-id header to trace traffic.</p>
<h3 id="tls-and-mutul-tls-tls-termination">Tls and Mutul Tls, Tls termination<a aria-hidden="true" class="anchor-heading icon-link" href="#tls-and-mutul-tls-tls-termination"></a></h3>
<h3 id="rate-limiting">Rate limiting<a aria-hidden="true" class="anchor-heading icon-link" href="#rate-limiting"></a></h3>
<h2 id="documents">Documents<a aria-hidden="true" class="anchor-heading icon-link" href="#documents"></a></h2>
<p><a href="https://envoyproxy.io">https://envoyproxy.io</a> ---> the main place for envoy
<a href="https://www.envoyproxy.io/docs/envoy/v1.27.0/intro/arch_overview/intro/terminology">https://www.envoyproxy.io/docs/envoy/v1.27.0/intro/arch_overview/intro/terminology</a> --> docs</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#envoy" title="Envoy">Envoy</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#concept" title="Concept">Concept</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#feature" title="Feature">Feature</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#service-discovery" title="Service Discovery">Service Discovery</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#load-balancing" title="Load Balancing">Load Balancing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#traffic-and-request-routing" title="Traffic and Request Routing">Traffic and Request Routing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#traffic-shifting-and-shadowing" title="Traffic Shifting and Shadowing">Traffic Shifting and Shadowing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#network-resilience" title="Network Resilience">Network Resilience</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#metrics" title="Metrics">Metrics</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tracing" title="Tracing">Tracing</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tls-and-mutul-tls-tls-termination" title="Tls and Mutul Tls, Tls termination">Tls and Mutul Tls, Tls termination</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#rate-limiting" title="Rate limiting">Rate limiting</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#documents" title="Documents">Documents</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"1x0zf84gbbfnd1owvoeciml","title":"Envoy","desc":"","updated":1691352642351,"created":1691234611028,"custom":{},"fname":"Container.kubernetes.Service mesh.Envoy","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"b2bd8a25b112863fe9e9aa803ecb054c","links":[],"anchors":{"envoy":{"type":"header","text":"Envoy","value":"envoy","line":7,"column":0,"depth":1},"concept":{"type":"header","text":"Concept","value":"concept","line":15,"column":0,"depth":2},"feature":{"type":"header","text":"Feature","value":"feature","line":19,"column":0,"depth":2},"service-discovery":{"type":"header","text":"Service Discovery","value":"service-discovery","line":24,"column":0,"depth":3},"load-balancing":{"type":"header","text":"Load Balancing","value":"load-balancing","line":27,"column":0,"depth":3},"traffic-and-request-routing":{"type":"header","text":"Traffic and Request Routing","value":"traffic-and-request-routing","line":30,"column":0,"depth":3},"traffic-shifting-and-shadowing":{"type":"header","text":"Traffic Shifting and Shadowing","value":"traffic-shifting-and-shadowing","line":33,"column":0,"depth":3},"network-resilience":{"type":"header","text":"Network Resilience","value":"network-resilience","line":36,"column":0,"depth":3},"metrics":{"type":"header","text":"Metrics","value":"metrics","line":39,"column":0,"depth":3},"tracing":{"type":"header","text":"Tracing","value":"tracing","line":42,"column":0,"depth":3},"tls-and-mutul-tls-tls-termination":{"type":"header","text":"Tls and Mutul Tls, Tls termination","value":"tls-and-mutul-tls-tls-termination","line":45,"column":0,"depth":3},"rate-limiting":{"type":"header","text":"Rate limiting","value":"rate-limiting","line":47,"column":0,"depth":3},"documents":{"type":"header","text":"Documents","value":"documents","line":50,"column":0,"depth":2}},"children":[],"parent":"9w063ps0rewi5dfc5ryfnq6","data":{}},"body":"\u003ch1 id=\"envoy\"\u003eEnvoy\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#envoy\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"envoy-1\"\u003eEnvoy\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#envoy-1\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eEnvoy is the backbone of the Istio service mesh. It is an open source project that lives in \u003ca href=\"https://envoyproxy.io\"\u003ehttps://envoyproxy.io\u003c/a\u003e .\u003c/p\u003e\n\u003cp\u003eIt is a transparent proxy. The main concept of which was established to create a transparent network proxy which is easy to debug. A proxy is a middleman that sits between the client and the server and through which the traffic flows for the communication between server and client.\nClient ---\u003e Proxy ---\u003e Server\nTechnically a proxy can stand between the client and server and simplify the setting. The communication logic can be placed in the proxy without the server and client having to delete with the communication logic and able to focus on their specific client or server based logics.\u003c/p\u003e\n\u003ch2 id=\"concept\"\u003eConcept\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#concept\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e Envoy is designed as an application level proxy and can understand the layer 7 protocols. It can be extended to understand other level proxies. Lot of more telemetries come out of box due to Envoy understanding application level protocols\u003c/p\u003e\n\u003ch2 id=\"feature\"\u003eFeature\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#feature\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eListeners --\u003e ports where downstream(something sending information from to the server or to the )\nRoutes --\u003e The route setup for the downstream routes to be moved to the upstream clusters\nClusters --\u003e the server portion or the \u003c/p\u003e\n\u003ch3 id=\"service-discovery\"\u003eService Discovery\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#service-discovery\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIt uses service discovery api to look for the service. \u003c/p\u003e\n\u003ch3 id=\"load-balancing\"\u003eLoad Balancing\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#load-balancing\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIt uses local-aware load balancing. Can be configured to use other routing strategies.\u003c/p\u003e\n\u003ch3 id=\"traffic-and-request-routing\"\u003eTraffic and Request Routing\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#traffic-and-request-routing\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSophisticated routing rules since it can understand L7 protocols like HTTP/1 or HTTp/2\u003c/p\u003e\n\u003ch3 id=\"traffic-shifting-and-shadowing\"\u003eTraffic Shifting and Shadowing\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#traffic-shifting-and-shadowing\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eEnvoy can split traffic based on weight and also move copy of traffic to certain version( only a copy of the traffic the real flow still can use the other version)\u003c/p\u003e\n\u003ch3 id=\"network-resilience\"\u003eNetwork Resilience\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#network-resilience\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eRetries, timeouts, Health checks can be configured in Envoy.\u003c/p\u003e\n\u003ch3 id=\"metrics\"\u003eMetrics\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#metrics\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIt can generate a lot of metrics\u003c/p\u003e\n\u003ch3 id=\"tracing\"\u003eTracing\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tracing\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eIt will generate x-request-id header to trace traffic.\u003c/p\u003e\n\u003ch3 id=\"tls-and-mutul-tls-tls-termination\"\u003eTls and Mutul Tls, Tls termination\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tls-and-mutul-tls-tls-termination\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch3 id=\"rate-limiting\"\u003eRate limiting\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#rate-limiting\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003ch2 id=\"documents\"\u003eDocuments\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#documents\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://envoyproxy.io\"\u003ehttps://envoyproxy.io\u003c/a\u003e ---\u003e the main place for envoy\n\u003ca href=\"https://www.envoyproxy.io/docs/envoy/v1.27.0/intro/arch_overview/intro/terminology\"\u003ehttps://www.envoyproxy.io/docs/envoy/v1.27.0/intro/arch_overview/intro/terminology\u003c/a\u003e --\u003e docs\u003c/p\u003e","noteIndex":{"id":"root","title":"root","desc":"","updated":1605266684036,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"b49e7e13a0c91addc8ab9ef97080cf1e","links":[],"anchors":{},"children":["jb6glaqzhtlu81fjsdvclge","0e4vo426e86vqr9gtgsayz7","c1bs7wsjfbhb0zipaywqv1"],"parent":null,"data":{},"body":"\nThis is the root for your Dendron vault.\n\nIf you decide to publish your entire vault, it will be your landing page. You are free to customize any part of this page except the frontmatter at the top, between the `---`.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://anityam.github.io/study/","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"1x0zf84gbbfnd1owvoeciml"},"buildId":"zp_HKZaSycHHJrSC5b1vy","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>